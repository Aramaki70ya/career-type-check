<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Career Type Check | キャリアタイプ12診断</title>
  <meta name="description" content="36問の質問に答えて、12のキャリアタイプからあなたに最も合ったタイプを診断します。">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="page">
    <!-- Header -->
    <header class="page-header">
      <div class="container">
        <h1>Career Type Assessment</h1>
        <p>12 Types × 36 Questions</p>
      </div>
    </header>

    <!-- Main Content -->
    <main class="page-content">
      <div class="container">
        <!-- Hero Section -->
        <section class="hero-section fade-in">
          <span class="hero-eyebrow">Discover Your True Potential</span>
          <h2 class="hero-title">
            <span class="line">Find Your</span>
            <span class="line gradient">Career Type</span>
          </h2>
          <p class="hero-subtitle">
            36問の診断であなたのキャリアタイプを特定。<br>
            強みと適性を可視化し、次のキャリアへ。
          </p>
          
          <!-- Resume Notice -->
          <div class="resume-notice hidden" id="resumeNotice">
            <strong>Continue where you left off</strong>
            <span id="resumeProgress">12 / 36 completed</span>
          </div>
          
          <!-- Completed Notice -->
          <div class="resume-notice hidden" id="completedNotice">
            <strong>Assessment Complete</strong>
            <span id="completedInfo">View your results or start a new assessment</span>
          </div>
          
          <!-- Actions -->
          <div class="hero-actions" id="heroActions">
            <!-- Buttons will be rendered dynamically -->
          </div>
        </section>

        <!-- Stats -->
        <section class="stats-grid fade-in">
          <div class="stat-item">
            <div class="stat-number">36</div>
            <div class="stat-label">Questions</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">12</div>
            <div class="stat-label">Types</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">5</div>
            <div class="stat-label">Axes</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">5-10</div>
            <div class="stat-label">Minutes</div>
          </div>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer class="page-footer">
      <div class="container">
        <p>© 2025 Career Type Assessment</p>
      </div>
    </footer>
  </div>

  <!-- Scripts -->
  <script src="types.js"></script>
  <script src="questions.js"></script>
  <script src="app.js"></script>
  <script>
    // ========================================
    // Index Page Logic
    // ========================================

    const resumeNotice = document.getElementById('resumeNotice');
    const resumeProgress = document.getElementById('resumeProgress');
    const completedNotice = document.getElementById('completedNotice');
    const completedInfo = document.getElementById('completedInfo');
    const heroActions = document.getElementById('heroActions');

    function init() {
      const hasProgress = storage.hasProgress();
      const isCompleted = storage.isCompleted();
      const answers = storage.getAnswers();
      const answeredCount = Object.keys(answers).length;

      if (isCompleted) {
        completedNotice.classList.remove('hidden');
        const completedDate = storage.getCompletedAt();
        if (completedDate) {
          completedInfo.textContent = `Completed on ${formatDate(completedDate)}`;
        }
        
        heroActions.innerHTML = `
          <a href="result.html" class="btn btn-primary btn-lg">View Results</a>
          <button type="button" class="btn btn-secondary btn-lg" id="newDiagnosisBtn">
            Start Over
          </button>
        `;
        
        document.getElementById('newDiagnosisBtn').addEventListener('click', handleNewDiagnosis);
        
      } else if (hasProgress) {
        resumeNotice.classList.remove('hidden');
        resumeProgress.textContent = `${answeredCount} / ${QUESTIONS.length} completed`;
        
        heroActions.innerHTML = `
          <a href="questions.html" class="btn btn-primary btn-lg">Continue</a>
          <button type="button" class="btn btn-secondary btn-lg" id="resetBtn">
            Start Over
          </button>
        `;
        
        document.getElementById('resetBtn').addEventListener('click', handleReset);
        
      } else {
        heroActions.innerHTML = `
          <a href="questions.html" class="btn btn-primary btn-lg">Start Assessment</a>
        `;
      }
    }

    function handleNewDiagnosis() {
      if (confirm('Clear current results and start a new assessment?')) {
        storage.clear();
        navigation.goToQuestions();
      }
    }

    function handleReset() {
      if (confirm('Reset progress and start over?')) {
        storage.clear();
        navigation.goToQuestions();
      }
    }

    init();
  </script>
</body>
</html>
