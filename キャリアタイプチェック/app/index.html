<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Career Type Check | キャリアタイプ12診断</title>
  <meta name="description" content="36問の質問に答えて、12のキャリアタイプからあなたに最も合ったタイプを診断します。">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="page">
    <!-- Header -->
    <header class="page-header">
      <div class="container">
        <h1>キャリアタイプ診断</h1>
        <p>12タイプ × 36問</p>
      </div>
    </header>

    <!-- Main Content -->
    <main class="page-content">
      <div class="container">
        <!-- Hero Section -->
        <section class="hero-section fade-in">
          <span class="hero-eyebrow">あなたの可能性を発見しよう</span>
          <h2 class="hero-title">
            <span class="line">あなたの</span>
            <span class="line gradient">キャリアタイプは？</span>
          </h2>
          <p class="hero-subtitle">
            36問の診断であなたのキャリアタイプを特定。<br>
            強みと適性を可視化し、次のキャリアへ。
          </p>
          
          <!-- Resume Notice -->
          <div class="resume-notice hidden" id="resumeNotice">
            <strong>続きから再開できます</strong>
            <span id="resumeProgress">12 / 36 問回答済み</span>
          </div>
          
          <!-- Completed Notice -->
          <div class="resume-notice hidden" id="completedNotice">
            <strong>診断完了</strong>
            <span id="completedInfo">結果を確認するか、新しく診断を始めましょう</span>
          </div>
          
          <!-- Actions -->
          <div class="hero-actions" id="heroActions">
            <!-- Buttons will be rendered dynamically -->
          </div>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer class="page-footer">
      <div class="container">
        <p>© 2025 キャリアタイプ診断</p>
      </div>
    </footer>
  </div>

  <!-- Scripts -->
  <script src="types.js"></script>
  <script src="questions.js"></script>
  <script src="app.js"></script>
  <script>
    // ========================================
    // Index Page Logic
    // ========================================

    const resumeNotice = document.getElementById('resumeNotice');
    const resumeProgress = document.getElementById('resumeProgress');
    const completedNotice = document.getElementById('completedNotice');
    const completedInfo = document.getElementById('completedInfo');
    const heroActions = document.getElementById('heroActions');

    function init() {
      const hasProgress = storage.hasProgress();
      const isCompleted = storage.isCompleted();
      const answers = storage.getAnswers();
      const answeredCount = Object.keys(answers).length;

      if (isCompleted) {
        completedNotice.classList.remove('hidden');
        const completedDate = storage.getCompletedAt();
        if (completedDate) {
          completedInfo.textContent = `${formatDate(completedDate)} に診断完了`;
        }
        
        heroActions.innerHTML = `
          <a href="result.html" class="btn btn-primary btn-lg">結果を見る</a>
          <button type="button" class="btn btn-secondary btn-lg" id="newDiagnosisBtn">
            最初からやり直す
          </button>
        `;
        
        document.getElementById('newDiagnosisBtn').addEventListener('click', handleNewDiagnosis);
        
      } else if (hasProgress) {
        resumeNotice.classList.remove('hidden');
        resumeProgress.textContent = `${answeredCount} / ${QUESTIONS.length} 問回答済み`;
        
        heroActions.innerHTML = `
          <a href="questions.html" class="btn btn-primary btn-lg">続きから再開</a>
          <button type="button" class="btn btn-secondary btn-lg" id="resetBtn">
            最初からやり直す
          </button>
        `;
        
        document.getElementById('resetBtn').addEventListener('click', handleReset);
        
      } else {
        heroActions.innerHTML = `
          <a href="questions.html" class="btn btn-primary btn-lg">診断をはじめる</a>
        `;
      }
    }

    function handleNewDiagnosis() {
      if (confirm('現在の結果をクリアして、新しく診断を始めますか？')) {
        storage.clear();
        navigation.goToQuestions();
      }
    }

    function handleReset() {
      if (confirm('進捗をリセットして、最初からやり直しますか？')) {
        storage.clear();
        navigation.goToQuestions();
      }
    }

    init();
  </script>
</body>
</html>
